<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>T5.0.4.1</title>
  <style>
  .active {
    color: white;
    padding: 5px;
    background: rgb(230, 21, 77);
  }

  .odd {
    color: white;
    padding: 5px;
    background: rgb(252, 170, 10);
  }
  </style>
</head>
<body>

  <H1 data-t5="header">HEEEELLLOO! {{ name }} !</H1>


  <div id="single" data-t5="single">
    <div>
      <h3>Hello <span style="color:{{ color : age > 30 }};">{{ name }}</span>!</h3>
      <p><span repeat="num in numbers">{{ num }},</span></p>
    </div>
    <ul>
      <li repeat="subset in set">
        <span>{{ subset.name }}</span>
        <ul>
          <li repeat="deep in subset.deep">
            <p>{{ deep.name }}, {{ deep.deeper[2] }} </p>
            <span repeat="num in deep.deeper > emoji">{{ num }}</span>
            <span repeat="double in deep.deeper | even" class="{{ 'odd' : double > 2 && double < 5 }}">{{ double }}</span>
          </li>
        </ul>
      </li>
    </ul>
  </div>

  <section id="links">

  </section>

<script type="text/javascript">
    const mods = {
      emoji (element) {
        return element += " " + String.fromCharCode(0xD83D, 0xDE04);
      }
    };

    const  filters = {
      even (element) {
        return element % 2 === 0;
      }
    };

    const singleData = {
      name: 'Ania',
      age: 33,
      color: 'rgb(23, 80, 228)',
      numbers: [2,1,4,3],
      set : [
        {id: 1, name: 'Piter', deep: [
          {name: 'Piter_A', deeper: [1,2,3]},
          {name: 'Piter_B', deeper: [4,5,6]},
          {name: 'Piter_C', deeper: [7,8,9]},
        ]},
        {id: 2, name: 'Bruce', deep: [
          {name: 'Bruce_A', deeper: [1,2,3]},
          {name: 'Bruce_B', deeper: [4,5,6]},
          {name: 'Bruce_C', deeper: [7,8,9]},
        ]},
        {id: 3, name: 'Clark', deep: [
          {name: 'Clark_A', deeper: [1,2,3]},
          {name: 'Clark_B', deeper: [4,5,6]},
          {name: 'Clark_C', deeper: [7,8,9]},
        ]}
      ]
    };


    const linksList = [
      {link: 'linkOne'},
      {link: 'linkTwo'},
      {link: 'linkThree'}
    ];

  </script>

<!-- NEW T5 -->
<script src="T5.js" charset="utf-8"></script>
<script type="text/javascript">
  const single = document.getElementById('single');
  const links = document.getElementById('links');

  t5.modify('emoji', mods.emoji)
    .filter('even', filters.even)
    .template()
    .render('single', singleData);

  t5.render('header', singleData);

  links.innerHTML = t5.template('test', `
    <div>
      <li repeat="item in data">
        <a href="#{{ item.link }}">{{ item.link }}</a>
      </li>
    </div>`).render('test', {data:linksList})

  console.log(singleData);
</script>

  <!-- PROTOTYPE -->
  <!-- <script src="T5.0.4.0.js" charset="utf-8"></script>
  <script type="text/javascript">
    const single = document.getElementById('single');
    single.innerHTML = build(single, filters, mods)(singleData);
    console.log(singleData);
  </script> -->

</body>
</html>
